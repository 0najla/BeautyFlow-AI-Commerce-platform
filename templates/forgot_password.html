<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <!-- ====================================================================
     BeautyFlow - Forgot Password Page
     ====================================================================
     Step 1 of password recovery flow. User enters email address to
     receive OTP verification code on their registered phone number.

     Author: BeautyFlow Team
     Version: 1.0.0
     ==================================================================== -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='white' rx='15' width='100' height='100'/%3E%3Ctext x='50' y='68' font-size='45' font-weight='bold' fill='%23e84a8a' text-anchor='middle'%3EBF%3C/text%3E%3C/svg%3E">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BeautyFlow - Forgot Password</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink-primary: #ff8fab;
            --pink-light: #ffc2d1;
            --pink-dark: #fb6f92;
            --pink-deep: #e75480;
            --cream: #fff5f7;
            --cream-dark: #ffe5ec;
            --charcoal: #4a4a4a;
            --charcoal-light: #6b6b6b;
            --blush: #ffecf1;
            --pearl: #fffbfc;
            --glass-border: rgba(255, 182, 193, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #ffe5ec 0%, #ffc2d1 50%, #ffb3c6 100%);
        }

        .bg-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; overflow: hidden; }
        .floating-orb { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.5; animation: float 20s ease-in-out infinite; }
        .orb-1 { width: 600px; height: 600px; background: radial-gradient(circle, #ff8fab 0%, transparent 70%); top: -200px; left: -200px; }
        .orb-2 { width: 500px; height: 500px; background: radial-gradient(circle, #ffc2d1 0%, transparent 70%); bottom: -150px; right: -150px; animation-delay: -5s; }
        .orb-3 { width: 400px; height: 400px; background: radial-gradient(circle, #ffb3c6 0%, transparent 70%); top: 50%; left: 50%; transform: translate(-50%, -50%); animation-delay: -10s; opacity: 0.3; }
        @keyframes float { 0%, 100% { transform: translate(0, 0) scale(1); } 25% { transform: translate(50px, -50px) scale(1.1); } 50% { transform: translate(-30px, 30px) scale(0.95); } 75% { transform: translate(40px, 40px) scale(1.05); } }
        .sparkles { position: absolute; width: 100%; height: 100%; pointer-events: none; }
        .sparkle { position: absolute; width: 4px; height: 4px; background: rgba(255, 255, 255, 0.8); border-radius: 50%; animation: sparkle 3s ease-in-out infinite; box-shadow: 0 0 6px rgba(255, 143, 171, 0.5); }
        @keyframes sparkle { 0%, 100% { opacity: 0; transform: scale(0); } 50% { opacity: 1; transform: scale(1); } }

        .forgot-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; position: relative; z-index: 1; }
        .forgot-wrapper { display: flex; width: 100%; max-width: 1100px; min-height: 650px; border-radius: 32px; overflow: hidden; box-shadow: 0 50px 100px rgba(0, 0, 0, 0.15), 0 0 0 1px var(--glass-border); animation: cardAppear 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(40px); }
        @keyframes cardAppear { to { opacity: 1; transform: translateY(0); } }

        .brand-panel { flex: 1; background: linear-gradient(160deg, #ff8fab 0%, #fb6f92 100%); padding: 60px 50px; display: flex; flex-direction: column; justify-content: space-between; position: relative; overflow: hidden; }
        .brand-panel::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); opacity: 0.5; }
        .brand-content { position: relative; z-index: 1; }
        .brand-logo { display: flex; align-items: center; gap: 16px; margin-bottom: 60px; animation: slideIn 0.8s ease-out 0.2s both; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        .logo-mark { width: 56px; height: 56px; background: linear-gradient(135deg, #ffffff 0%, #fff5f7 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 700; color: var(--pink-dark); box-shadow: 0 8px 32px rgba(251, 111, 146, 0.4); position: relative; overflow: hidden; }
        .logo-mark::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.6) 50%, transparent 60%); animation: shimmer 3s ease-in-out infinite; }
        @keyframes shimmer { 0% { transform: translateX(-100%) rotate(45deg); } 100% { transform: translateX(100%) rotate(45deg); } }
        .logo-text { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 600; color: var(--cream); letter-spacing: 2px; }
        .brand-headline { animation: slideIn 0.8s ease-out 0.4s both; }
        .brand-headline h1 { font-family: 'Cormorant Garamond', serif; font-size: 48px; font-weight: 600; color: var(--cream); line-height: 1.2; margin-bottom: 20px; }
        .brand-headline h1 span { color: #fff5f7; text-shadow: 0 2px 10px rgba(255, 255, 255, 0.3); }
        .brand-headline p { font-size: 16px; color: rgba(255, 255, 255, 0.7); line-height: 1.8; max-width: 380px; }

        .security-info { display: flex; flex-direction: column; gap: 16px; margin-top: 50px; animation: slideIn 0.8s ease-out 0.6s both; }
        .security-item { display: flex; align-items: center; gap: 16px; padding: 16px 20px; background: rgba(255, 255, 255, 0.15); border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s ease; }
        .security-item:hover { background: rgba(255, 255, 255, 0.25); transform: translateX(8px); }
        .security-icon { width: 44px; height: 44px; background: linear-gradient(135deg, #ffffff 0%, #fff5f7 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .security-text h4 { color: var(--cream); font-size: 14px; font-weight: 500; }
        .security-text p { color: rgba(255, 255, 255, 0.6); font-size: 12px; }
        .brand-footer { position: relative; z-index: 1; }
        .brand-footer p { color: rgba(255, 255, 255, 0.5); font-size: 12px; }

        .form-panel { flex: 1; background: var(--cream); padding: 60px 50px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        .form-panel::before { content: ''; position: absolute; top: 40px; right: 40px; width: 120px; height: 120px; background: radial-gradient(circle, var(--blush) 0%, transparent 70%); border-radius: 50%; filter: blur(40px); }

        .back-link { display: inline-flex; align-items: center; gap: 8px; color: var(--charcoal-light); text-decoration: none; font-size: 14px; margin-bottom: 30px; transition: all 0.3s ease; animation: slideUp 0.8s ease-out 0.2s both; }
        .back-link:hover { color: var(--pink-primary); transform: translateX(-5px); }

        .form-header { margin-bottom: 40px; animation: slideUp 0.8s ease-out 0.3s both; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .form-header .icon-wrapper { width: 80px; height: 80px; background: linear-gradient(135deg, var(--pink-light) 0%, var(--pink-primary) 100%); border-radius: 24px; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; box-shadow: 0 8px 32px rgba(255, 143, 171, 0.3); }
        .form-header .icon-wrapper svg { width: 40px; height: 40px; color: white; }
        .form-header h2 { font-family: 'Cormorant Garamond', serif; font-size: 36px; font-weight: 600; color: var(--charcoal); margin-bottom: 8px; }
        .form-header p { color: var(--charcoal-light); font-size: 14px; line-height: 1.6; }

        .forgot-form { display: flex; flex-direction: column; gap: 24px; animation: slideUp 0.8s ease-out 0.5s both; }
        .input-group { position: relative; }
        .input-group label { display: block; font-size: 12px; font-weight: 500; color: var(--charcoal-light); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .input-wrapper { position: relative; display: flex; align-items: center; }
        .input-icon { position: absolute; left: 20px; color: var(--pink-primary); pointer-events: none; }
        .input-wrapper input { width: 100%; padding: 18px 20px 18px 54px; font-family: 'Montserrat', sans-serif; font-size: 15px; color: var(--charcoal); background: var(--pearl); border: 2px solid transparent; border-radius: 16px; outline: none; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(255, 143, 171, 0.1); }
        .input-wrapper input::placeholder { color: #ccc; }
        .input-wrapper input:hover { background: white; box-shadow: 0 4px 16px rgba(255, 143, 171, 0.15); }
        .input-wrapper input:focus { background: white; border-color: var(--pink-primary); box-shadow: 0 8px 24px rgba(255, 143, 171, 0.2), 0 0 0 4px rgba(255, 143, 171, 0.1); }

        .error-message { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border: 1px solid #f87171; border-radius: 12px; padding: 14px 18px; color: #dc2626; font-size: 13px; display: flex; align-items: center; gap: 10px; animation: shake 0.5s ease-in-out; }
        .success-message { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border: 1px solid #34d399; border-radius: 12px; padding: 14px 18px; color: #059669; font-size: 13px; display: flex; align-items: center; gap: 10px; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-8px); } 40%, 80% { transform: translateX(8px); } }

        .btn-submit { position: relative; padding: 18px 32px; font-family: 'Montserrat', sans-serif; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; color: white; background: linear-gradient(135deg, var(--pink-primary) 0%, var(--pink-dark) 100%); border: none; border-radius: 16px; cursor: pointer; overflow: hidden; transition: all 0.4s ease; box-shadow: 0 8px 24px rgba(255, 143, 171, 0.4); margin-top: 8px; }
        .btn-submit::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, var(--pink-dark) 0%, var(--pink-deep) 100%); opacity: 0; transition: opacity 0.4s ease; }
        .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 12px 32px rgba(255, 143, 171, 0.5); }
        .btn-submit:hover::before { opacity: 1; }
        .btn-submit span { position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-submit .spinner { position: absolute; width: 24px; height: 24px; border: 3px solid rgba(255, 255, 255, 0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; opacity: 0; }
        .btn-submit.loading span { opacity: 0; }
        .btn-submit.loading .spinner { opacity: 1; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .login-link { text-align: center; margin-top: 32px; animation: slideUp 0.8s ease-out 0.7s both; }
        .login-link p { font-size: 14px; color: var(--charcoal-light); }
        .login-link a { color: var(--pink-primary); font-weight: 600; text-decoration: none; }
        .login-link a:hover { color: var(--pink-dark); text-decoration: underline; }

        @media (max-width: 900px) {
            .forgot-wrapper { flex-direction: column; max-width: 500px; }
            .brand-panel { padding: 40px 30px; }
            .brand-headline h1 { font-size: 36px; }
            .security-info { display: none; }
            .form-panel { padding: 40px 30px; }
            .form-header h2 { font-size: 28px; }
        }
        @media (max-width: 480px) {
            .forgot-container { padding: 16px; }
            .forgot-wrapper { border-radius: 24px; }
            .brand-panel { padding: 30px 24px; }
            .form-panel { padding: 30px 24px; }
            .form-header h2 { font-size: 24px; }
            .input-wrapper input { padding: 16px 16px 16px 48px; font-size: 14px; }
        }
    </style>
</head>

<body>
    <div class="bg-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
        <div class="sparkles" id="sparkles"></div>
    </div>

    <div class="forgot-container">
        <div class="forgot-wrapper">
            <!-- Left Panel - Branding -->
            <div class="brand-panel">
                <div class="brand-content">
                    <div class="brand-logo">
                        <div class="logo-mark">BF</div>
                        <div class="logo-text">BeautyFlow</div>
                    </div>
                    
                    <div class="brand-headline">
                        <h1>Reset Your <br><span>Password</span></h1>
                        <p>Don't worry! It happens to the best of us. Enter your email and we'll send you a verification code to reset your password.</p>
                    </div>

                    <div class="security-info">
                        <div class="security-item">
                            <div class="security-icon">üîê</div>
                            <div class="security-text">
                                <h4>Secure Verification</h4>
                                <p>OTP sent to your phone number</p>
                            </div>
                        </div>
                        <div class="security-item">
                            <div class="security-icon">‚è±Ô∏è</div>
                            <div class="security-text">
                                <h4>Quick Process</h4>
                                <p>Reset in less than 2 minutes</p>
                            </div>
                        </div>
                        <div class="security-item">
                            <div class="security-icon">üõ°Ô∏è</div>
                            <div class="security-text">
                                <h4>Account Protection</h4>
                                <p>Your data is always safe with us</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="brand-footer">
                    <p>¬© 2025 BeautyFlow ‚Ä¢ BeautyFlow Project</p>
                </div>
            </div>

            <!-- Right Panel - Forgot Password Form -->
            <div class="form-panel">
                <a href="{{ url_for('login_page') }}" class="back-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="19" y1="12" x2="5" y2="12"/>
                        <polyline points="12 19 5 12 12 5"/>
                    </svg>
                    Back to Login
                </a>

                <div class="form-header">
                    <div class="icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </div>
                    <h2>Forgot Password?</h2>
                    <p>Enter your email address and we'll send a verification code to your registered phone number.</p>
                </div>

                <form id="forgotForm" class="forgot-form" method="POST" action="{{ url_for('forgot_password_submit') }}">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="input-group">
                        <label for="email">Email Address</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            <input 
                                type="email" 
                                name="email" 
                                id="email" 
                                placeholder="name@example.com" 
                                required
                                autocomplete="email"
                            >
                        </div>
                    </div>

                    {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            {% if category == 'error' %}
                            <div class="error-message">
                                <span>‚ö†Ô∏è</span> {{ message }}
                            </div>
                            {% elif category == 'success' %}
                            <div class="success-message">
                                <span>‚úì</span> {{ message }}
                            </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% endwith %}

                    <button type="submit" class="btn-submit" id="submitBtn">
                        <span>
                            Send Verification Code
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"/>
                                <polyline points="12 5 19 12 12 19"/>
                            </svg>
                        </span>
                        <div class="spinner"></div>
                    </button>
                </form>

                <div class="login-link">
                    <p>Remember your password? <a href="{{ url_for('login_page') }}">Login here</a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sparkle Particles
        function createSparkles() {
            const container = document.getElementById('sparkles');
            if (!container) return;
            for (let i = 0; i < 50; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparkle.style.animationDuration = (2 + Math.random() * 2) + 's';
                container.appendChild(sparkle);
            }
        }
        createSparkles();

        // Form Submission
        const forgotForm = document.getElementById('forgotForm');
        const submitBtn = document.getElementById('submitBtn');
        
        if (forgotForm && submitBtn) {
            forgotForm.addEventListener('submit', function(e) {
                const email = document.getElementById('email').value.trim();
                if (!email) {
                    e.preventDefault();
                    return;
                }
                submitBtn.classList.add('loading');
            });
        }

        // Auto-focus
        window.addEventListener('load', () => {
            setTimeout(() => document.getElementById('email')?.focus(), 1200);
        });
    </script>
</body>
</html>